<!DOCTYPE html>
<html>
<head>
    <title>Skydespil</title>
    <style>
        #skydespil {
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <canvas id="skydespil" width="800" height="600"></canvas>
    <script>
        var canvas = document.getElementById("skydespil");
        var context = canvas.getContext("2d");

        var skærmBredde = canvas.width;
        var skærmHøjde = canvas.height;
        var skudHastighed = 5;
        var asteroidHastighed = 2;
        var score = 0;

        var rumskib = {
            x: skærmBredde / 2,
            y: skærmHøjde - 50,
            bredde: 50,
            højde: 50
        };

        var skud = [];

        var asteroider = [];

        canvas.addEventListener("mousemove", function(event) {
            rumskib.x = event.clientX - canvas.offsetLeft;
        });

        canvas.addEventListener("click", function(event) {
            var x = rumskib.x + rumskib.bredde / 2;
            var y = rumskib.y;
            skud.push({ x: x, y: y });
        });

        function opdaterSpil() {
            context.clearRect(0, 0, skærmBredde, skærmHøjde);

            // Opdater skud
            for (var i = 0; i < skud.length; i++) {
                var s = skud[i];
                s.y -= skudHastighed;
                context.fillStyle = "white";
                context.fillRect(s.x, s.y, 2, 10);

                // Tjek kollision mellem skud og asteroider
                for (var j = 0; j < asteroider.length; j++) {
                    var a = asteroider[j];
                    if (s.x >= a.x && s.x <= a.x + a.bredde && s.y >= a.y && s.y <= a.y + a.højde) {
                        asteroider.splice(j, 1);
                        skud.splice(i, 1);
                        score += 1;
                        break;
                    }
                }

                if (s.y < 0) {
                    skud.splice(i, 1);
                }
            }

            // Opdater asteroider
            for (var i = 0; i < asteroider.length; i++) {
                var a = asteroider[i];
                a.y += asteroidHastighed;
                context.fillStyle = "red";
                context.fillRect(a.x, a.y, a.bredde, a.højde);

                // Tjek kollision mellem rumskib og asteroider
                if (a.y + a.højde >= rumskib.y && a.y <= rumskib.y + rumskib.højde &&
                    a.x + a.bredde >= rumskib.x && a.x <= rumskib.x + rumskib.bredde) {
                    alert("Spillet er slut! Din score: " + score);
                    location.reload();
                }

                if (a.y > skærmHøjde) {
                    asteroider.splice(i, 1);
                }
            }

            // Opdater rumskib
            context.fillStyle = "blue";
            context.fillRect(rumskib.x, rumskib.y, rumskib.bredde, rumskib.højde);

            // Tegn score
            context.fillStyle = "black";
            context.font = "16px Arial";
            context.fillText("Score: " + score, 10, 20);

            requestAnimationFrame(opdaterSpil);
        }

        function genererAsteroid() {
            var bredde = Math.random() * 50 + 20;
            var x = Math.random() * (skærmBredde - bredde);
            asteroider.push({ x: x, y: -bredde, bredde: bredde, højde: bredde });
            setTimeout(genererAsteroid, Math.random() * 2000 + 1000);
        }

        genererAsteroid();
        opdaterSpil();
    </script>
</body>
</html>
